language: generic

matrix:
    include:
        - env: PYTHON_VERSION=3.6
          os: linux
          services: docker
          sudo: required
          after_script: make stop-sqlserver
        - env: PYTHON_VERSION=3.5
          os: linux
          services: docker
          sudo: required
          after_script: make stop-sqlserver
        - env: PYTHON_VERSION=3.4
          os: linux
          services: docker
          sudo: required
          after_script: make stop-sqlserver
        - env: PYTHON_VERSION=3.3
          os: linux
          services: docker
          sudo: required
          after_script: make stop-sqlserver
        - env: PYTHON_VERSION=2.7
          os: linux
          services: docker
          sudo: required
          after_script: make stop-sqlserver
        - os: osx

before_install: travis/before_install.sh

# Travis-ci doesn't support docker support on OS X. Just verify ctds builds on OS X.
install: if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then pip install .; fi

script: if [[ "$TRAVIS_OS_NAME" != "osx" ]]; then make check_${PYTHON_VERSION}; fi
